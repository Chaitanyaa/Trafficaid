<!DOCTYPE HTML>
<html>
<head>
    <title>Traffic</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/main1.css') }}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.4.1/cerulean/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<style>
div.horizontalgap {
  float: left;
  overflow: hidden;
  height: 1px;
  width: 0px;
}
</style>
<body class="is-preload" style="overflow-x: hidden; overflow-y: hidden;margin-left: -10px;" onload="startTime()">
    
    <script>
        $(document).ready(function() {
            $('select').on('change',function() {
                var fwy = $("#fwy").val()
                if(fwy == '880'){
                    $("#pointa").val('Milpitas')
                    $("#pointb").val('Oakland')
                    $("#dist").text('35.4 miles')
                }
                else if(fwy=='101'){
                    $("#pointa").val('San Jose')
                    $("#pointb").val('Sausalito')
                    $("#dist").text('53.5 miles')
                }
                else{
                    // alert("Select either freeway U.S. 101 or I880 only");
                    $("#fwy").val(fwy)
                }
            });
            if($('#fwy').val()){
                var fwy = $("#fwy").val()
                if(fwy == '880'){
                    $('#fwy').val(880).trigger('change');
                }
                if(fwy == '101'){
                    $('#fwy').val(101).trigger('change');
                }
            }
        });
        </script>
    <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" style="color:#E13A44" id="exampleModalLabel">Real-Time - Prediction @Current hour</h5>
          </div>
        <div class="modal-body">
          <h5 style="color:#E13A44"><b>Speed Prediction:</b> We take real time 1 hr intervals of traffic,weather and incident data from current day midnight upto last hour as input to our model
        </h5>
        <h5><a href="https://n8nucy5gbh.execute-api.us-east-2.amazonaws.com/production/realtime/?station=400001" target="_blank">API</a></h5>
        </br>
        <h5 style="color:#E13A44"><b>Incident Probability Prediction:</b> Incident Probability Prediction: We take real time 5 min intervals of traffic,weather and incident data from current day for last hour as input to our model.
        </h5>
        <h5><a href="https://42gd9f43r6.execute-api.us-east-2.amazonaws.com/production/realtime/?station=400001" target="_blank">API</a></h5>
        </div>
        </div>
      </div>
    </div>
  </div>
<!-- Header -->
<div id="header">

    <div class="top">

        <!-- Logo -->
        <div id="logo">
            <span class="image avatar48"><img src="{{url_for('static', filename='images/trafficaid.png')}}" alt="" /></span>
            <h1 id="title" style="margin-left: -20px;">Traffic Aid</h1>
            <p>for planners and commuters</p>
        </div>
        <div style="margin-right: 100px;"><span class="icon solid fa-home" style="margin-right: 50px;"></span><h4 style="color:#E13A44">BAY AREA</h4></div>
        <br/><br/>
        <!-- Nav -->
        <nav id="nav">
            <ul>
                <li>
                    <div style="margin-right:100px;  margin-left:30px">
                        <form action="/prediction" method="post">
                        <div class="form-group">
                                    <select class="form-control" name="fwy" id="fwy" value="101">
                                        <option value="" disabled selected>Select a Freeway</option>
                                        {% if fwy=='101' %}
                                        <option selected="selected" value="101">U.S 101</option>
                                        <option value="680">I680</option>
                                        <option value="280">I280</option>
                                        <option value="880">I880</option>
                                        {% elif fwy=='880' %}
                                        <option value="101">U.S 101</option>
                                        <option value="680">I680</option>
                                        <option value="280">I280</option>
                                        <option selected="selected" value="880">I880</option>
                                        {% else %}
                                        <option value="101">U.S 101</option>
                                        <option value="680">I680</option>
                                        <option value="280">I280</option>
                                        <option value="880">I880</option>
                                        {% endif %}
                                    </select><br/>
                                </div>
                                    <input type="text" class="form-control" name="pointa" id="pointa" aria-describedby="Point A" placeholder="Point A"><br/>
                                    <input type="text" class="form-control" name="pointb" id="pointb" aria-describedby="Point B" placeholder="Point B"><br/>
                                    
                </li>
            </ul>
        </nav>

        <div id="div" style="margin-right:70px">
            <button id="submit" class="btn btn-warning">Submit</button>
        </div>
        <br>
        <div style="margin-right:30px"><p style="color:#E13A44"><h4 style="color:#E13A44">Predicted Travel Time</h4> {{timetak}} mins</p>
        </div>
        </form>

    </div>
    <div style="margin-right:30px;"><h5 style="color:#E13A44;">Calculated Distance</h5><span  id="dist">55 miles</span>
    </div>
    <div class="bottom">
    </div>
</div>
<!-- Main -->
<div id="main">
    <nav id="nav3" class="nav1" style="width: 100%;">
        <ul>
            <li><a href="/" style="color:#ffffff">Home</a></li>
            <li><a href="/aboutc" style="color:#ffffff">About</a></li>
            <!--<li><a href="/data" style="color:#ffffff">Raw Data Analysis</a></li>-->
            <!--<li><a href="/model" style="color:#ffffff">Model Evaluation</a></li>-->
            <li><a href="/prediction" style="color:#ffffff" class="active"><span class="icon solid fa-circle" style="color:#267326;"></span>&nbsp Traffic Prediction</a></li>
        </ul>
    </nav>

    <!-- Live Traffic-->
    </br>
    </br>
    <br>
    <h5><a href="#exampleModal" data-toggle="modal" style="color:black;margin-left: 50px;">More Details</a></h5>
    <section id="commuter" class="four" style="margin-top: -100px;">
        <!-- Nav -->
        <h2 style="color:#E13A44"><div id="txt" style="margin-left: -650px;margin-top: 50px;"></div></h2>
        <table style="margin-left: 70px;margin-top: -90px;">
            <tr>
                <td>
                    <br><br>
                <table>
                <tr>
                <div class="alert alert-dismissible alert-info">
                    <div class="horizontalgap" style="width:70px"></div>
                    <span class="image avatar48"><img src="{{url_for('static', filename='images/windspeed.png')}}" alt="" /></span>
                    <br>
                    <div class="horizontalgap" style="width:20px"></div>
                    <a href="#" class="alert-link">Wind Speed: {{avgwindspeed}} mph</a>
                </div>
                </tr>
                <tr>
                    <div class="alert alert-dismissible alert-info">
                    <div class="horizontalgap" style="width:70px"></div>   
                    <span class="image avatar48"><img src="{{url_for('static', filename='images/precipitation.png')}}" alt="" /></span>
                    <br>
                    <div class="horizontalgap" style="width:20px"></div>
                    <a href="#" class="alert-link">Precipitation: {{avgprecipitation}} in</a>
                    </div>
                </tr>
                <tr>
                    <div class="alert alert-dismissible alert-info">
                    <div class="horizontalgap" style="width:70px"></div>    
                     <span class="image avatar48"><img src="{{url_for('static', filename='images/visibility.png')}}" alt="" /></span>
                     <br>
                     <div class="horizontalgap" style="width:30px"></div>
                     <a href="#" class="alert-link">Visibility: {{avgvisibility}} mi</a>
                    </div>
                </tr>
                <tr>
                    <div class="alert alert-dismissible alert-info">
                        <div class="horizontalgap" style="width:70px"></div>
                     <span class="image avatar48"><img src="{{url_for('static', filename='images/incident.png')}}" alt="" /></span>
                     <br>
                     <div class="horizontalgap" style="width:30px"></div>
                     <a href="#" class="alert-link">Incidents: {{incidentcount}}</a>
                    </div>
                </tr>
                </table>
                </td>    
                <td>    
                <div class="container">
                    <table style="width: 60%;height: 50%;">
                        <tr>
                            <td>
                            <div class="alert alert-dismissible alert-info" style="width: 100%;">
                                <div class="horizontalgap" style="width:120px"></div>
                                <span class="image avatar48"><img src="{{url_for('static', filename='images/trafficspeed.png')}}" alt="" /></span>
                                <br>
                                <div class="horizontalgap" style="width:70px"></div>
                                <a href="#" class="alert-link">Traffic Speed: {{avgspeed}} mph</a>
                            </div>
                            </td>
                            <td>
                            <div class="alert alert-dismissible alert-info" style="width: 100%;">
                                <div class="horizontalgap" style="width:120px"></div>
                                <span class="image avatar48"><img src="{{url_for('static', filename='images/occupancy.png')}}" alt="" /></span>
                                <br>
                                <div class="horizontalgap" style="width:70px"></div>
                                <a href="#" class="alert-link">Occupancy: {{avgocc}}% </a>
                            </div>
                            </td>
                        </tr><tr><td colspan="2">
                    <!--<div align="right">
                        <strong style="font-size: 35px;font-weight:900px"><span class="icon solid fa-clock">  Travel Time:XXX</span></strong>
                    </div>-->
                    <iframe src="{{url_for('static', filename='Map.html')}}" style="height:420px;width:650px;border: 2px solid grey;"></iframe>
                    <!--<iframe src="/getFoliumMapPred" height="900" width="900"></iframe>-->
                </td></tr>
                    </table>    
                </div>
                </td>
            </tr>
    </table>
    </section>    
</div>

<!-- Footer -->
<div id="footer">

</div>

<!--Scripts-->
<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.scrolly.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.scrollex.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/browser.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/breakpoints.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/util.js') }}"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script>
    function startTime() {
    var today = new Date();
    var d = today.getDate();
    var mon = today.getMonth();
    var year = today.getFullYear(); 
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    m = checkTime(m);
    s = checkTime(s);
    document.getElementById('txt').innerHTML =
    mon+"/"+d+"/"+year+" "+h + ":" + m + ":" + s;
    var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
    }
    
</script>
<script>var dt = new Date();
    document.getElementById("datetime").innerHTML=dt.toLocaleString();</script>

</body>
</html>
